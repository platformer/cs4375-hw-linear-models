---
Title: "Classification"
Author:"Atmin Sheth, Andrew Sen "
output:
  html:
    df_print:paged
    pdf_document:default
editor: 
  chunck_output_type: inline

---

**Author:**
  Atmin Sheth
  Andrew Sen
  
**Date**
09-23-2022


**Data**

The note book is acquired on kragle  dataset called Airlines
showing the airline and their flights being delay(1) or not (0)

The predictor include:
*   id: int (unique number )
*   Airline: factor of char 
*   Flight: int (unique number)
*   AirpotFrom: char
*   AirportTo:  char
*   DayofWeek: int(constant)
*   Time: int
*   Delay: boolean Delay(1) not delay(0)
targeted predictor:
*   Airline
*   Flight
*   Delay

***overview of Logistic regression***
Logistic Regression allows to classify the data into n- parts  to determine the section the factors belong and predict upon that 
for this dataset is a classification of if the airlines will have delay or not , flight is to see a corelatrion wiht airline

**strengths of logistic **
separates classes 
computationally cheap
nice probability output
**weakness of logistic**
there is a chance of too close of probility so not able to classify 

**the evalution**
The benefit of using this was see the probability of a airline being delay or not.

##Reading csv file
want find the difference of delay and not delay
the airlines that are tend to be delay
```{r}
flights <- read.csv("Data/Airlines.csv", header = TRUE)
str(flights)
```

###data cleean
getting the data we want to work with that be airlines,flight and  delay


```{r}
flights <- flights[,c(2,3,9)]
flights$Airline <- as.numeric(factor(flights$Airline))
head(flights)
```

##Data Exploration
spliting the data to training and testinng in a ration of 80/20(.4) train/test


```{r}
set.seed(3)
i <- sample(1:nrow(flights), .4*nrow(flights),replace=FALSE)
train <- flights[-i,]
test <- flights[i,]
```

```{r}
summary(train)
```

seeing the head of the train set

```{r}
head(train)
```

the end of the train data set 
```{r}
tail(train)
```
Seeing how many airplines we are working with in training 
```{r}
table(train$Airline)

```
Seeing the sum of delay flight 
how many of the files in the train dataset was delaye
```{r}
sum(train$Delay)
```
where are the flight most going to 
```{r}
dim(train )
```




bar graph to show the delay vs non delay in all of the airline in train data set
```{r}
count <- table(train$Delay)
bp<- barplot(count,main="Flights arival times", names.arg=c("Delay", "on Time"),cex.names=.8)
```

There are more delay in overall flights then reaching in time 




let's see a  airlines delay in a subset of about 100 in  train
```{r}
sub<-train[1:500,]
T<-table(sub$Airline,(sub$Delay==1))
plot(T, main="Airlines Arival Delay or not")
```
 
in the subset it can see that there are airlines, w



##logistic regression predictor

```{r}
glm1 <- glm(Delay~. , family=binomial, data=train)
summary(glm1)
```
It took 4 itteration to get the results
There is a drop from the Null deviance to the Residual deviance
for all two predict or for airline and flight there is a good p value of less the 2e^-16 

##naive basis

```{r}
library(e1071)
nb1<- naiveBayes(Delay~.,data=train)
nb1
```
here we can see a mean of airlines and flights


#model testing 
```{r}
probs <- predict(glm1, newdata = test, type="response")
preds <- ifelse(probs==0,0,1)
acc1<- mean(preds==test$Delay)
print(paste("glm1 accuracy =",acc1))
table(preds,test$Delay)
print("prediction of naive bais")
predN <- predict(nb1,newdata = test, type="class")
table(predN,test$Delay)
print("mean of delays in the naive bais ")
mean(predN==test$Delay)

```

From this models of test data it can be seen that the rate of being late is low 
the mean shows the rate being .58 






